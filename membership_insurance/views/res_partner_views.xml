<?xml version="1.0"?>
<odoo>
        
  <record id="res_partner_view_search_inherit_taxid" model="ir.ui.view">
    <field name="name">res.partner.view.search.inherit.taxid</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_res_partner_filter" />
    <field name="act_window_id" ref="membership.action_membership_members" />
    <field name="search_view_id" ref="base.view_res_partner_filter" />
    <field name="arch" type="xml">
      <field name="parent_id" position="after">
          <field name="personnumber" domain="[('is_company','=',False)]" />
          <field string="Org.Nr" name="vat" domain="[('insurance_company_type','=','company')]" />
      </field>
      <filter name="inactive" position="before">
        <filter string="Org.Nr" name="company_registry" domain="[('insurance_company_type','=','company')]" />
        <filter string="Person Number" name="personnumber" domain="[('is_company','=',False)]"/>
        <filter string="Company" name="is_company" domain="[('insurance_company_type','=','company')]" />
        <filter string="Fellowship" name="is_fellowship" domain="[('insurance_company_type','=','fellowship')]" />
        <filter string="Accommodator" name="is_accommodator" domain="[('insurance_company_type','=','accommodator')]" />
        <filter string="Male" name="gender" domain="[('gender','=','man')]" />
        <filter string="Female" name="gender" domain="[('gender','=','woman')]" />
      </filter>
    </field>
  </record>

  
  <record id="view_member_tree_accommodator" model="ir.ui.view">
    <field name="name">member.tree</field>
    <field name="model">res.partner</field>
    <field eval="99" name="priority"/>
    <field name="arch" type="xml">
        <tree string="Accommodator ">
            <field name="status" />
            <field name="insurance_company_type" />
            <field name="fellowship_id" />
            <field name="insurance_company_id" />
            <field name="name" />
            <field name="liability_insurance_permission" widget="many2many_tags" />
            <field name="email"/>
            <field name="user_id" invisible="1"/>
            <field name="country_id" invisible="1"/>
            <field name="parent_id" invisible="1"/>
            <field name="active" invisible="1"/>
            <field name="personnumber" string="PersonNumber"/>
            <field name="city" />
        </tree>
    </field>
  </record>
  <record id="view_member_tree_all" model="ir.ui.view">
    <field name="name">member.tree</field>
    <field name="model">res.partner</field>
    <field eval="99" name="priority"/>
    <field name="arch" type="xml">
        <tree string="All ">
            <field name="status" />
            <field name="insurance_company_type" />
            <field name="fellowship_id" />
            <field name="insurance_company_id" />
            <field name="name" />
            <field name="liability_insurance_permission" widget="many2many_tags" />
            <field name="email"/>
            <field name="user_id" invisible="1"/>
            <field name="country_id" invisible="1"/>
            <field name="active" invisible="1"/>
            <field name="org_prn" string="Org/pers-nummer"/>
            <field name="city" />
        </tree>
    </field>
  </record>
  <record id="view_member_tree_fellowship" model="ir.ui.view">
    <field name="name">member.tree</field>
    <field name="model">res.partner</field>
    <field eval="99" name="priority"/>
    <field name="arch" type="xml">
        <tree string="Fellowship">
            <field name="status" />
            <field name="insurance_company_type" />
            <field name="count_company" />
            <field name="count_accommodator" />
            <field name="name" />
            <field name="user_id" invisible="1"/>
            <field name="country_id" invisible="1"/>
            <field name="parent_id" invisible="1"/>
            <field name="active" invisible="1"/>
        </tree>
    </field>
  </record>
  <record id="view_member_tree_company" model="ir.ui.view">
    <field name="name">member.tree</field>
    <field name="model">res.partner</field>
    <field eval="99" name="priority"/>
    <field name="arch" type="xml">
        <tree string="Company">
            <field name="status" />
            <field name="insurance_company_type" />
            <field name="fellowship_id" />
            <field name="count_accommodator" />
            <field name="name" />
            <field name="liability_insurance_permission" widget="many2many_tags" />
            <field name="email"/>
            <field name="user_id" invisible="1"/>
            <field name="country_id" invisible="1"/>
            <field name="parent_id" invisible="1"/>
            <field name="active" invisible="1"/>
            <field name="company_registry" string="Org.Nr"/>
            <field name="city" />
        </tree>
    </field>
  </record>

  <record id="view_partners_form_crm1" model="ir.ui.view">
    <field name="name">partner.form.insurance.crm.inherit</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="crm.view_partners_form_crm1" />
    <field name="arch" type="xml">
      <button name="%(crm.crm_lead_opportunities)d" position="before">
        <button class="oe_stat_button" name="company_button" type="object" icon="fa-industry" context="{'partner_id': active_id, 'partner_name': name}">
          <field name="count_company" widget="statinfo" />
        </button>
        <button class="oe_stat_button" name="accommodator_button" type="object" icon="fa-group" context="{'partner_id': active_id, 'partner_name': name}" attrs="{'invisible': [('company_type', '!=', 'company')]}">
          <field name="count_accommodator" widget="statinfo" />
        </button>

      </button>
    </field>
  </record>
  
  <record id="view_partner_form" model="ir.ui.view">
    <field name="name">partner.form.insurance.inherited</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form" />
    <field name="arch" type="xml">
      <field name="company_type" position="replace">
        <field name="company_type" invisible="1" />
        <field name="insurance_company_type" options="{'horizontal': true}" widget="radio" />
        <!-- class="oe_edit_only"  -->
      </field>
      <field name="child_ids" position="attributes">
        <attribute name="context">{'search_default_is_company':False,'default_parent_id': active_id, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_supplier': supplier, 'default_customer': customer, 'default_lang': lang, 'default_user_id': user_id}</attribute>
      </field>
      <field name="parent_id" position="attributes">
        <attribute name="attrs">{'invisible': [('insurance_company_type','in', ['fellowship'])]}</attribute>
      </field>
      <!--
           attrs=mode="kanban" context="{'default_parent_id': active_id, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_supplier': supplier, 'default_customer': customer, 'default_lang': lang, 'default_user_id': user_id}">
      -->
      <div class="oe_title" position="after">
        <group>
          <group string="Count companies" name="companies" priority="2" attrs="{'invisible': [('insurance_company_type', '!=', 'fellowship')]}" style="width:33%">
            <field name="count_co_life_permission" style="width:33%"/>
            <field name="count_co_property_permission" style="width:33%"/>
            <field name="count_co_property_life_permission" style="width:33%"/>
          </group>
          <group string="Count employed accommodators" name="employed" priority="2" attrs="{'invisible': [('insurance_company_type', 'not in', ['fellowship','company'])]}" style="width:33%">
            <field name="count_ac_life" style="width:33%"/>
            <field name="count_ac_property" style="width:33%"/>
            <field name="count_ac_property_life" style="width:33%"/>
          </group>
          <group string="Count licenced accommodators" name="licenced_ac" priority="3" attrs="{'invisible': [('insurance_company_type', 'not in', ['fellowship','company'])]}" style="width:33%">
            <field name="count_ac_life_licence" style="width:33%"/>
            <field name="count_ac_property_licence" style="width:33%"/>
            <field name="count_ac_property_life_licence" style="width:33%"/>
          </group>
        </group>
      </div>
      <field name="vat" position="before">
        <field name="personnumber" placeholder="10 or 12 digital" attrs="{'invisible': [('company_type', '=', 'company')]}" />
        <field name="company_role" widget="many2one_tag" attrs="{'invisible': [('insurance_company_type', '!=', 'person'),('insurance_company_type', '!=', 'accommodator'),]}" />
        <field name="gender" widget='radio' options="{'horizontal': true}" attrs="{'invisible': [('company_type', '=', 'company')]}"/>
        <field name="liability_insurance" widget="many2many_tags" attrs="{'invisible': [('insurance_company_type', 'not in', ['person','accommodator'])]}" />
        <field name="liability_insurance_permission" widget="many2many_tags" attrs="{'invisible': [('insurance_company_type', '=', 'fellowship')]}"/>
        <field name="revenue" attrs="{'invisible': [('insurance_company_type', 'in', ['person','accommodator'])]}" />
      </field>
      
      
      <field name="category_id" position="after">
          <field name="date_start" attrs="{'invisible': [('insurance_company_type', '=', 'person')]}"/>
          <field name="date_end" attrs="{'invisible': [('insurance_company_type', '=', 'person')]}"/>
          <field name="internal_notes"/>
      </field>
      <field name="vat" position="attributes">
        <attribute name="attrs">{'readonly': [('parent_id','!=',False)], 'invisible': [('insurance_company_type', '=', 'fellowship')]}</attribute>
      </field>
<!--
      <field name="company_registry" position="replace">
          <field name="company_registry" attrs="{'invisible': [('insurance_company_type','=','fellowship')]}"/>
      </field>
--> 
      <field name="type" position="attributes">
          <attribute name="attrs">{'invisible':[('insurance_company_type', 'in', ['fellowship','company'])]}</attribute>
      </field>
      <div class="o_address_format" position="replace">
        <div class="o_address_format" attrs="{'invisible':[('insurance_company_type', '=', 'fellowship')]}">
            <div attrs="{'invisible': [('type', '!=', 'contact')]}" class="oe_edit_only"></div>
            <field name="street" placeholder="Street..." class="o_address_street"/>
            <field name="street2" placeholder="Street 2..." class="o_address_street"/>
            <field name="zip" placeholder="ZIP" class="o_address_zip" style="margin-right:10px"/>
            <field name="city" placeholder="City" class="o_address_city" style="width:70%"/>
            <field name="state_id" class="o_address_state" placeholder="State" options='{"no_open": True}'/>
            <field name="country_id" placeholder="Country" class="o_address_country"/>
        </div>
      </div>
      
<!--
          <attribute name="attrs">{'readonly': False}</attribute>
      </div>
-->
      
      <label for="street" position="attributes">
        <attribute name="attrs">{'invisible':[('insurance_company_type', '=', 'fellowship')]}</attribute>
      </label>
<!--
      <field name="street" position="replace">
        <field name="street" attrs="{'invisible':[('insurance_company_type', '=', 'fellowship')],'readonly':False}" />
      </field>
      <field name="street2" position="replace">
        <field name="street2" attrs="{'invisible':[('insurance_company_type', '=', 'fellowship')],'readonly':False}" />
      </field>
      <field name="city" position="replace">
        <field name="city" attrs="{'invisible':[('insurance_company_type', '=', 'fellowship')],'readonly':False}" />
      </field>
      <field name="state_id" position="replace">
        <field name="state_id" attrs="{'invisible':[('insurance_company_type', '=', 'fellowship')],'readonly':False}" />
      </field>
      <field name="zip" position="attributes">
        <attribute name="attrs">{'invisible':[('insurance_company_type', '=', 'fellowship')]}</attribute>
        <attribute name="field">style="margin-right:10px"</attribute>
      </field>
-->
<!--
      <field name="zip" position="replace">
        <field name="zip" placeholder="ZIP" class="o_address_zip" attrs="{'invisible':[('insurance_company_type', '=', 'fellowship')]}" style="margin-right:10px"/>
      </field>
-->
      <field name="country_id" position="attributes">
        <attribute name="attrs">{'invisible':True}</attribute>
      </field>
      <field name="lang" position="attributes">
        <attribute name="attrs">{'invisible':True}</attribute>
      </field>
      <label for="mobile" position="attributes">
        <attribute name="attrs">{'invisible':[('insurance_company_type', '!=', 'person')]}</attribute>
      </label>
      <field name="mobile" position="attributes">
        <attribute name="attrs">{'invisible':[('insurance_company_type', '!=', 'person')]}</attribute>
      </field>
      <field name="function" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      <field name="title" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      <field name="website" position="attributes">
        <attribute name="invisible">1</attribute>
      </field>
      
      <button name="company_button" position="attributes">
        <attribute name="attrs">{'invisible': [('insurance_company_type', 'not in', ['fellowship','company'])]}</attribute>
      </button>
    </field>
  </record>
  
  <record id="view_partner_form_sfm" model="ir.ui.view">
      <field name="name">res.partner.sfm</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form" />
      <field name="arch" type="xml">
          <xpath expr="//page[@name='internal_notes']" position="attributes">                   
            <attribute name="attrs">{'invisible': True}</attribute>               
          </xpath>
      </field>
    </record>
    
  <record id="view_org_nr_sfm" model="ir.ui.view">
      <field name="name">org.nr.sfm</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="l10n_se.view_partners_form_se1" />
      <field name="arch" type="xml">
          <field name="company_registry" position="replace">
            <field name="company_registry" string="Org.Nr" attrs="{'invisible': [('insurance_company_type','=','fellowship')]}" />
          </field>
      </field>
  </record>


  <record id="action_all_form" model="ir.actions.act_window">
    <field name="name">All</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">form</field>
    <field name="domain">[('insurance_company_type','!=','person')]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="act_window_id" ref="membership.action_membership_members" />
    <field name="search_view_id" ref="base.view_res_partner_filter" />
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('membership_insurance.view_member_tree_all')}),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('base.res_partner_kanban_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('base.view_partner_form')})]"/>
  </record>
  <record id="action_fellowship_form" model="ir.actions.act_window">
    <field name="name">Fellowship</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('insurance_company_type','=','fellowship')]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="act_window_id" ref="membership.action_membership_members" />
    <field name="search_view_id" ref="base.view_res_partner_filter" />
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('membership_insurance.view_member_tree_fellowship')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('base.view_partner_form')})]"/>
  </record>
  <record id="action_accommodator_form" model="ir.actions.act_window">
    <field name="name">Accommodator</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('insurance_company_type','=','accommodator')]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="act_window_id" ref="membership.action_membership_members" />
    <field name="search_view_id" ref="base.view_res_partner_filter" />
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('membership_insurance.view_member_tree_accommodator')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('base.view_partner_form')})]"/>
  </record>
  <record id="action_company_form" model="ir.actions.act_window">
    <field name="name">Company</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('insurance_company_type','=','company')]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="act_window_id" ref="membership.action_membership_members" />
    <field name="search_view_id" ref="base.view_res_partner_filter" />
    <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('membership_insurance.view_member_tree_company')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('base.view_partner_form')})]"/>
  </record>
  
  <menuitem id="res_partner_menu_all" name="All" parent="membership.menu_membership" action="action_all_form" sequence="99" />
  <menuitem id="res_partner_menu_fellowship" name="Fellowship" parent="membership.menu_membership" action="action_fellowship_form" sequence="2" />
  <menuitem id="res_partner_menu_company" name="Company" parent="membership.menu_membership" action="action_company_form" sequence="3" />
  <menuitem id="res_partner_menu_accommodator" name="Accommodator" parent="membership.menu_membership" action="action_accommodator_form" sequence="4" />
  
 
</odoo>
